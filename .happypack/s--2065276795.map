{"version":3,"sources":["src/store/reducers.js"],"names":["orm","register","ormReducer","makeRootReducer","asyncReducers","injectedModels","length","location","form","modal","drawerMenu","auth","injectReducer","store","key","reducer","models","Object","hasOwnProperty","call","replaceReducer"],"mappings":";;;;;;;;;;;;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AAEA;;AAEA;;;;;;AACA;AACA;AACO,IAAMA,oBAAM,mBAAZ,C,CAdP;;AAeAA,IAAIC,QAAJ;AACA,IAAMC,aAAa,6BAAcF,GAAd,CAAnB;;AAEO,IAAMG,4CAAkB,SAAlBA,eAAkB,CAACC,aAAD,EAAwC;AAAA,MAAxBC,cAAwB,uEAAP,EAAO;;;AAErE,MAAIA,eAAeC,MAAf,GAAwB,CAA5B,EAA+B;AAC7BN,QAAIC,QAAJ,6CAAgBI,cAAhB;AACD;;AAED,SAAO;AACLL,SAAgBE,UADX;AAELK,gCAFK;AAGLC,4BAHK;AAILC,0BAJK;AAKLC,oCALK;AAML;AACAC;AAPK,KAQFP,aARE,EAAP;AAUD,CAhBM;;AAkBA,IAAMQ,wCAAgB,SAAhBA,aAAgB,CAACC,KAAD,QAAoC;AAAA,MAA1BC,GAA0B,QAA1BA,GAA0B;AAAA,MAArBC,OAAqB,QAArBA,OAAqB;AAAA,MAAZC,MAAY,QAAZA,MAAY;;AAC/D,MAAIC,OAAOC,cAAP,CAAsBC,IAAtB,CAA2BN,MAAMT,aAAjC,EAAgDU,GAAhD,CAAJ,EAA0D;AACxD;AACD;;AAEDD,QAAMT,aAAN,CAAoBU,GAApB,IAA2BC,OAA3B;AACAF,QAAMO,cAAN,CAAqBjB,gBAAgBU,MAAMT,aAAtB,EAAqCY,MAArC,CAArB;AACD,CAPM;;kBASQb,e","file":"reducers.js","sourceRoot":"/home/vagrant/projects/instrumental","sourcesContent":["// import { combineReducers } from 'redux-immutablejs';\nimport { combineReducers } from 'redux';\nimport locationReducer from './location';\nimport modalReducer from './modal';\nimport drawerMenuReducer from './drawerMenu';\nimport { reducer as formReducer } from 'redux-form';\nimport { authStateReducer } from './auth';\nimport Immutable from 'immutable'\n\nimport { ORM, createReducer } from 'redux-orm';\n\nimport baseModels from './baseModels';\n// selectors need access to ORM\n// TODO: put orm in own module\nexport const orm = new ORM();\norm.register(...baseModels);\nconst ormReducer = createReducer(orm);\n\nexport const makeRootReducer = (asyncReducers, injectedModels = []) => {\n\n  if (injectedModels.length > 0) {\n    orm.register(...injectedModels);\n  }\n\n  return combineReducers({\n    orm:            ormReducer,\n    location:       locationReducer,\n    form:           formReducer,\n    modal:          modalReducer,\n    drawerMenu:     drawerMenuReducer,\n    // auth reducer is immutable js so must be mapped in containers correctly\n    auth:           authStateReducer,\n    ...asyncReducers\n  });\n};\n\nexport const injectReducer = (store, { key, reducer, models}) => {\n  if (Object.hasOwnProperty.call(store.asyncReducers, key)) {\n    return;\n  }\n\n  store.asyncReducers[key] = reducer;\n  store.replaceReducer(makeRootReducer(store.asyncReducers, models));\n};\n\nexport default makeRootReducer;\n"]}