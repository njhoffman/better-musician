{"version":3,"sources":["src/store/auth/actions/request-password-reset.js"],"names":["requestPasswordResetFormUpdate","requestPasswordResetStart","requestPasswordResetComplete","requestPasswordResetError","requestPasswordReset","REQUEST_PASSWORD_RESET_START","REQUEST_PASSWORD_RESET_COMPLETE","REQUEST_PASSWORD_RESET_ERROR","REQUEST_PASSWORD_RESET_FORM_UPDATE","endpoint","key","value","type","message","errors","body","dispatch","headers","method","redirect_url","then","catch"],"mappings":";;;;;;;;;;;QAUgBA,8B,GAAAA,8B;QAGAC,yB,GAAAA,yB;QAGAC,4B,GAAAA,4B;QAGAC,yB,GAAAA,yB;QAGAC,oB,GAAAA,oB;;AAtBhB;;AACA;;AACA;;;;AACA;;;;;;AAEO,IAAMC,sEAAqC,8BAA3C;AACA,IAAMC,4EAAqC,iCAA3C;AACA,IAAMC,sEAAqC,8BAA3C;AACA,IAAMC,kFAAqC,oCAA3C;;AAEA,SAASR,8BAAT,CAAwCS,QAAxC,EAAkDC,GAAlD,EAAuDC,KAAvD,EAA8D;AACnE,SAAO,EAAEC,MAAMJ,kCAAR,EAA4CC,kBAA5C,EAAsDC,QAAtD,EAA2DC,YAA3D,EAAP;AACD;AACM,SAASV,yBAAT,CAAmCQ,QAAnC,EAA6C;AAClD,SAAO,EAAEG,MAAMP,4BAAR,EAAsCI,kBAAtC,EAAP;AACD;AACM,SAASP,4BAAT,CAAsCO,QAAtC,EAAgDI,OAAhD,EAAyD;AAC9D,SAAO,EAAED,MAAMN,+BAAR,EAAyCG,kBAAzC,EAAmDI,gBAAnD,EAAP;AACD;AACM,SAASV,yBAAT,CAAmCM,QAAnC,EAA6CK,MAA7C,EAAqD;AAC1D,SAAO,EAAEF,MAAML,4BAAR,EAAsCE,kBAAtC,EAAgDK,cAAhD,EAAP;AACD;AACM,SAASV,oBAAT,CAA8BW,IAA9B,EAAoCN,QAApC,EAA8C;AACnD,SAAO,oBAAY;AACjBO,aAASf,0BAA0BQ,QAA1B,CAAT;;AAEA,WAAO,qBAAM,gDAA2BA,QAA3B,CAAN,EAA4C;AACjDQ,eAAS;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OADwC;AAKjDC,cAAQ,MALyC;AAMjDH,YAAM,yBAAe,sBAAOA,IAAP,EAAa;AAChCI,sBAAc,iDAA4BV,QAA5B;AADkB,OAAb,CAAf;AAN2C,KAA5C,EAUJW,IAVI,qCAWJA,IAXI,CAWC;AAAA,UAAEP,OAAF,QAAEA,OAAF;AAAA,aAAeG,SAASd,6BAA6BO,QAA7B,EAAuCI,OAAvC,CAAT,CAAf;AAAA,KAXD,EAYJQ,KAZI,CAYE;AAAA,UAAEP,MAAF,SAAEA,MAAF;AAAA,aAAcE,SAASb,0BAA0BM,QAA1B,EAAoCK,MAApC,CAAT,CAAd;AAAA,KAZF,CAAP;AAaD,GAhBD;AAiBD","file":"request-password-reset.js","sourceRoot":"/home/vagrant/projects/instrumental","sourcesContent":["import {getPasswordResetRequestUrl, getPasswordResetRedirectUrl}  from \"../utils/session-storage\";\r\nimport {parseResponse} from \"../utils/handle-fetch-response\";\r\nimport extend from \"extend\";\r\nimport fetch from \"../utils/fetch\";\r\n\r\nexport const REQUEST_PASSWORD_RESET_START       = \"REQUEST_PASSWORD_RESET_START\";\r\nexport const REQUEST_PASSWORD_RESET_COMPLETE    = \"REQUEST_PASSWORD_RESET_COMPLETE\";\r\nexport const REQUEST_PASSWORD_RESET_ERROR       = \"REQUEST_PASSWORD_RESET_ERROR\";\r\nexport const REQUEST_PASSWORD_RESET_FORM_UPDATE = \"REQUEST_PASSWORD_RESET_FORM_UPDATE\";\r\n\r\nexport function requestPasswordResetFormUpdate(endpoint, key, value) {\r\n  return { type: REQUEST_PASSWORD_RESET_FORM_UPDATE, endpoint, key, value };\r\n}\r\nexport function requestPasswordResetStart(endpoint) {\r\n  return { type: REQUEST_PASSWORD_RESET_START, endpoint };\r\n}\r\nexport function requestPasswordResetComplete(endpoint, message) {\r\n  return { type: REQUEST_PASSWORD_RESET_COMPLETE, endpoint, message };\r\n}\r\nexport function requestPasswordResetError(endpoint, errors) {\r\n  return { type: REQUEST_PASSWORD_RESET_ERROR, endpoint, errors };\r\n}\r\nexport function requestPasswordReset(body, endpoint) {\r\n  return dispatch => {\r\n    dispatch(requestPasswordResetStart(endpoint));\r\n\r\n    return fetch(getPasswordResetRequestUrl(endpoint), {\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      method: \"post\",\r\n      body: JSON.stringify(extend(body, {\r\n        redirect_url: getPasswordResetRedirectUrl(endpoint)\r\n      }))\r\n    })\r\n      .then(parseResponse)\r\n      .then(({message}) => dispatch(requestPasswordResetComplete(endpoint, message)))\r\n      .catch(({errors}) => dispatch(requestPasswordResetError(endpoint, errors)));\r\n  };\r\n}\r\n"]}