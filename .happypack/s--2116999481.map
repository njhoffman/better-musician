{"version":3,"sources":["src/store/auth/actions/email-sign-up.js"],"names":["emailSignUpFormUpdate","emailSignUpStart","emailSignUpComplete","emailSignUpError","emailSignUp","EMAIL_SIGN_UP_START","EMAIL_SIGN_UP_COMPLETE","EMAIL_SIGN_UP_ERROR","EMAIL_SIGN_UP_FORM_UPDATE","endpoint","key","value","type","user","errors","body","endpointKey","dispatch","headers","method","confirm_success_url","then","data","catch","res"],"mappings":";;;;;;;;;;;QAUgBA,qB,GAAAA,qB;QAGAC,gB,GAAAA,gB;QAGAC,mB,GAAAA,mB;QAGAC,gB,GAAAA,gB;QAGAC,W,GAAAA,W;;AAtBhB;;AACA;;AACA;;;;AACA;;;;;;AAEO,IAAMC,oDAA4B,qBAAlC;AACA,IAAMC,0DAA4B,wBAAlC;AACA,IAAMC,oDAA4B,qBAAlC;AACA,IAAMC,gEAA4B,2BAAlC;;AAEA,SAASR,qBAAT,CAA+BS,QAA/B,EAAyCC,GAAzC,EAA8CC,KAA9C,EAAqD;AAC1D,SAAO,EAAEC,MAAMJ,yBAAR,EAAmCC,kBAAnC,EAA6CC,QAA7C,EAAkDC,YAAlD,EAAP;AACD;AACM,SAASV,gBAAT,CAA0BQ,QAA1B,EAAoC;AACzC,SAAO,EAAEG,MAAMP,mBAAR,EAA6BI,kBAA7B,EAAP;AACD;AACM,SAASP,mBAAT,CAA6BW,IAA7B,EAAmCJ,QAAnC,EAA6C;AAClD,SAAO,EAAEG,MAAMN,sBAAR,EAAgCO,UAAhC,EAAsCJ,kBAAtC,EAAP;AACD;AACM,SAASN,gBAAT,CAA0BW,MAA1B,EAAkCL,QAAlC,EAA4C;AACjD,SAAO,EAAEG,MAAML,mBAAR,EAA6BO,cAA7B,EAAqCL,kBAArC,EAAP;AACD;AACM,SAASL,WAAT,CAAqBW,IAArB,EAA2BC,WAA3B,EAAwC;AAC7C,SAAO,oBAAY;AACjBC,aAAShB,iBAAiBe,WAAjB,CAAT;;AAEA,WAAO,qBAAM,uCAAkBA,WAAlB,CAAN,EAAsC;AAC3CE,eAAS;AACP,kBAA+B,kBADxB;AAEP,uCAA+B,GAFxB;AAGP,wBAA+B;AAHxB,OADkC;AAM3C;AACAC,cAAQ,MAPmC;AAQ3CJ,YAAM,yBAAe,sBAAOA,IAAP,EAAa;AAChCK,6BAAqB;AADW,OAAb,CAAf;AARqC,KAAtC,EAYJC,IAZI,qCAaJA,IAbI,CAaC;AAAA,UAAEC,IAAF,QAAEA,IAAF;AAAA,aAAYL,SAASf,oBAAoBoB,IAApB,EAA0BN,WAA1B,CAAT,CAAZ;AAAA,KAbD,EAcJO,KAdI,CAcE,eAAO;;AAEZ,UAAIC,IAAIV,MAAR,EAAgB;AACdG,iBAASd,iBAAiBqB,IAAIV,MAArB,EAA6BE,WAA7B,CAAT;AACD,OAFD,MAEO;AACL;AACA,cAAMQ,GAAN;AACD;AACF,KAtBI,CAAP;AAuBD,GA1BD;AA2BD","file":"email-sign-up.js","sourceRoot":"/home/vagrant/projects/instrumental","sourcesContent":["import {getEmailSignUpUrl, getConfirmationSuccessUrl}  from \"../utils/session-storage\";\nimport {parseResponse} from \"../utils/handle-fetch-response\";\nimport extend from \"extend\";\nimport fetch from \"../utils/fetch\";\n\nexport const EMAIL_SIGN_UP_START       = \"EMAIL_SIGN_UP_START\";\nexport const EMAIL_SIGN_UP_COMPLETE    = \"EMAIL_SIGN_UP_COMPLETE\";\nexport const EMAIL_SIGN_UP_ERROR       = \"EMAIL_SIGN_UP_ERROR\";\nexport const EMAIL_SIGN_UP_FORM_UPDATE = \"EMAIL_SIGN_UP_FORM_UPDATE\";\n\nexport function emailSignUpFormUpdate(endpoint, key, value) {\n  return { type: EMAIL_SIGN_UP_FORM_UPDATE, endpoint, key, value };\n}\nexport function emailSignUpStart(endpoint) {\n  return { type: EMAIL_SIGN_UP_START, endpoint };\n}\nexport function emailSignUpComplete(user, endpoint) {\n  return { type: EMAIL_SIGN_UP_COMPLETE, user, endpoint };\n}\nexport function emailSignUpError(errors, endpoint) {\n  return { type: EMAIL_SIGN_UP_ERROR, errors, endpoint };\n}\nexport function emailSignUp(body, endpointKey) {\n  return dispatch => {\n    dispatch(emailSignUpStart(endpointKey));\n\n    return fetch(getEmailSignUpUrl(endpointKey), {\n      headers: {\n        \"Accept\":                      \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\":                \"application/json\"\n      },\n      // mode: 'no-cors',\n      method: \"POST\",\n      body: JSON.stringify(extend(body, {\n        confirm_success_url: getConfirmationSuccessUrl()\n      }))\n    })\n      .then(parseResponse)\n      .then(({data}) => dispatch(emailSignUpComplete(data, endpointKey)))\n      .catch(res => {\n\n        if (res.errors) {\n          dispatch(emailSignUpError(res.errors, endpointKey))\n        } else {\n          debugger;\n          throw res;\n        }\n      });\n  };\n}\n"]}