{"version":3,"sources":["src/store/auth/actions/sign-out.js"],"names":["signOutStart","signOutComplete","signOutError","signOut","SIGN_OUT_START","SIGN_OUT_COMPLETE","SIGN_OUT_ERROR","endpoint","type","user","errors","dispatch","method","then","catch"],"mappings":";;;;;;QASgBA,Y,GAAAA,Y;QAGAC,e,GAAAA,e;QAGAC,Y,GAAAA,Y;QAGAC,O,GAAAA,O;;AAlBhB;;AACA;;AACA;;AACA;;;;;;AAEO,IAAMC,0CAAoB,gBAA1B;AACA,IAAMC,gDAAoB,mBAA1B;AACA,IAAMC,0CAAoB,gBAA1B;;AAEA,SAASN,YAAT,CAAsBO,QAAtB,EAAgC;AACrC,SAAO,EAAEC,MAAMJ,cAAR,EAAwBG,kBAAxB,EAAP;AACD;AACM,SAASN,eAAT,CAAyBM,QAAzB,EAAmCE,IAAnC,EAAyC;AAC9C,SAAO,EAAED,MAAMH,iBAAR,EAA2BI,UAA3B,EAAiCF,kBAAjC,EAAP;AACD;AACM,SAASL,YAAT,CAAsBK,QAAtB,EAAgCG,MAAhC,EAAwC;AAC7C,SAAO,EAAEF,MAAMF,cAAR,EAAwBC,kBAAxB,EAAkCG,cAAlC,EAAP;AACD;AACM,SAASP,OAAT,CAAiBI,QAAjB,EAA2B;AAChC,SAAO,oBAAY;AACjBI,aAASX,aAAaO,QAAb,CAAT;;AAEA,WAAO,qBAAM,mCAAcA,QAAd,CAAN,EAA+B,EAACK,QAAQ,QAAT,EAA/B,EACJC,IADI,qCAEJA,IAFI,CAEC,UAACJ,IAAD,EAAU;AACdE,eAASV,gBAAgBM,QAAhB,EAA0BE,IAA1B,CAAT;AACAE,eAAS,wCAAwB,IAAxB,CAAT;AACA;AACD,KANI,EAOJG,KAPI,CAOE,gBAAc;AAAA,UAAZJ,MAAY,QAAZA,MAAY;;AACnBC,eAAST,aAAaK,QAAb,EAAuBG,MAAvB,CAAT;AACAC,eAAS,wCAAwB,IAAxB,CAAT;AACA;AACA,YAAMD,MAAN;AACD,KAZI,CAAP;AAaD,GAhBD;AAiBD","file":"sign-out.js","sourceRoot":"/home/vagrant/projects/instrumental","sourcesContent":["import {getSignOutUrl, destroySession}  from \"../utils/session-storage\";\r\nimport {parseResponse} from \"../utils/handle-fetch-response\";\r\nimport {storeCurrentEndpointKey} from \"./configure\";\r\nimport fetch from \"../utils/fetch\";\r\n\r\nexport const SIGN_OUT_START    = \"SIGN_OUT_START\";\r\nexport const SIGN_OUT_COMPLETE = \"SIGN_OUT_COMPLETE\";\r\nexport const SIGN_OUT_ERROR    = \"SIGN_OUT_ERROR\";\r\n\r\nexport function signOutStart(endpoint) {\r\n  return { type: SIGN_OUT_START, endpoint };\r\n}\r\nexport function signOutComplete(endpoint, user) {\r\n  return { type: SIGN_OUT_COMPLETE, user, endpoint };\r\n}\r\nexport function signOutError(endpoint, errors) {\r\n  return { type: SIGN_OUT_ERROR, endpoint, errors };\r\n}\r\nexport function signOut(endpoint) {\r\n  return dispatch => {\r\n    dispatch(signOutStart(endpoint));\r\n\r\n    return fetch(getSignOutUrl(endpoint), {method: \"delete\"})\r\n      .then(parseResponse)\r\n      .then((user) => {\r\n        dispatch(signOutComplete(endpoint, user))\r\n        dispatch(storeCurrentEndpointKey(null));\r\n        destroySession();\r\n      })\r\n      .catch(({errors}) => {\r\n        dispatch(signOutError(endpoint, errors))\r\n        dispatch(storeCurrentEndpointKey(null));\r\n        destroySession();\r\n        throw errors;\r\n      });\r\n  };\r\n}\r\n"]}